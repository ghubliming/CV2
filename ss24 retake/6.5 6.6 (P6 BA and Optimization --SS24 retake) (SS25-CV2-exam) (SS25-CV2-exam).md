
# Refined Explanation of Bundle Adjustment Optimization

Here is a more detailed and easy-to-understand explanation of the concepts for the bundle adjustment problem.

### **Summary of the Task**

The task is to solve a bundle adjustment problem, which is a non-linear least-squares problem. We use the Levenberg-Marquardt algorithm to iteratively find the camera poses ($x_p$) and 3D point coordinates ($x_i$) that minimize the reprojection error.

### **Question 6.5: Structure of the Normal Equations**

The Levenberg-Marquardt algorithm involves solving a system of linear equations (the "normal equations") in each iteration. This system is represented in a block matrix form:

$$
\begin{pmatrix} U & W \\ W^T & V \end{pmatrix} \begin{pmatrix} \Delta x_p \\ \Delta x_i \end{pmatrix} = \begin{pmatrix} b_p \\ b_i \end{pmatrix}
$$
>[!info] 
>the Eq. from that Matrix form â†’ U is only related with p, and V is only related with i


- **$U$ and $V$ have a diagonal (or block-diagonal) structure.**
  - **Why?** The block $U$ corresponds to the camera poses, and the block $V$ corresponds to the 3D points.
    - A single camera pose parameter in $x_p$ only affects the reprojection errors of the 3D points observed by *that specific camera*. It does not directly affect the errors related to other cameras. This independence results in a block-diagonal structure for $U$.
    - Similarly, a single 3D point coordinate in $x_i$ only affects the reprojection errors in the cameras that observe *that specific point*. It doesn't affect the errors for other points. This leads to a block-diagonal structure for $V$.

- **$W$ does not usually have a diagonal structure.**
  - **Why?** The block $W$ represents the interaction between the camera poses and the 3D points. A single camera pose affects *all* the 3D points it observes, and a single 3D point is affected by *all* the cameras that observe it. This complex relationship of dependencies creates off-diagonal elements in $W$, so it is not a sparse or diagonal matrix.

### **Question 6.6: Using the Schur Complement**

Solving the large system of equations directly is computationally expensive. The Schur complement is a mathematical trick to break it down into smaller, more manageable steps.

We want to solve for the camera pose updates, $\Delta x_p$. To do this, we need to eliminate the 3D point updates, $\Delta x_i$.

There are two forms of the Schur complement presented:
1.  $S = V - W^T U^{-1} W$
2.  $S = U - W V^{-1} W^T$

To find the correct one, we start with the block equations:
1.  $U \Delta x_p + W \Delta x_i = b_p$
2.  $W^T \Delta x_p + V \Delta x_i = b_i$

From the second equation, we can isolate $\Delta x_i$:
$V \Delta x_i = b_i - W^T \Delta x_p$
$\Delta x_i = V^{-1} (b_i - W^T \Delta x_p)$

==Now, substitute this expression for $\Delta x_i$ into the first equation:==
$U \Delta x_p + W (V^{-1} (b_i - W^T \Delta x_p)) = b_p$
$U \Delta x_p + W V^{-1} b_i - W V^{-1} W^T \Delta x_p = b_p$

Rearrange the terms to group $\Delta x_p$:
$(U - W V^{-1} W^T) \Delta x_p = b_p - W V^{-1} b_i$

This gives us the **reduced system** for $\Delta x_p$.

**Answer:**
- **Which form to use?** We use the form $S = U - W V^{-1} W^T$ because this is the one that arises when we eliminate $\Delta x_i$ to solve for $\Delta x_p$.
- **The reduced system to solve is:**
  $$
  (U - W V^{-1} W^T) \Delta x_p = b_p - W V^{-1} b_i
  $$

This is computationally more efficient because the matrix $V$ is large but block-diagonal, which makes its inverse $V^{-1}$ easy to compute.
